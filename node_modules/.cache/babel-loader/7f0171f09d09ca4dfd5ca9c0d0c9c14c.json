{"ast":null,"code":"var _jsxFileName = \"D:\\\\CLSFY\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport './App.css';\nimport { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport AppBar from './components/AppBar';\nimport About from './components/About';\nimport AppStepper from './components/AppStepper';\nimport HandleFile from './components/file_handling/HandleFile';\nimport ModelsCards from './components/ModelsCards';\nimport ScoresAndStats from './components/scores_and_stats/ScoresAndStats';\nimport HandleDataToPredict from './components/handle_data_to_predict/HandleDataToPredict';\nimport Container from '@mui/material/Container';\nimport { v4 as uuidv4 } from 'uuid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TextString = \"Text\";\nconst FeaturesString = \"Features\";\nconst firstColor = \"#ffcc80\";\nconst secondColor = \"#80cbc4\";\nconst anonymousString = \"Anonymous\";\nconst signedString = \"Signed\";\n\nconst scrollToRef = ref => ref.current.scrollIntoView({\n  behavior: 'smooth',\n  block: 'center'\n});\n\nfunction App() {\n  _s();\n\n  const [themeColor, setThemeColor] = useState(firstColor);\n  const [classifyingType, setClassifyingType] = useState(TextString);\n  const [accuracy, setAccuracy] = useState(0);\n  const [user, setUser] = useState(null);\n  const [userType, setUserType] = useState(anonymousString);\n  const [uid, setUid] = useState(uuidv4()); //generate unique id for anonymous user\n\n  const [features, setFeatures] = useState({});\n  const [modelId, setModelId] = useState(null);\n  const [modelsData, setModelsData] = useState(null);\n  const [mandatoryCourses, setMandatoryCourses] = useState(null);\n  const [electiveCourses, setElectiveCourses] = useState(null);\n  const [userHaveSchedulerData, setUserHaveSchedulerData] = useState(false);\n  const [publishedSchedulersData, setPublishedSchedulersData] = useState([]);\n  const [sharedSchedulersData, setSharedSchedulersData] = useState([]);\n  useEffect(async () => {\n    /*\n    const schedulersDataRes = await fetch('/schedulersData')\n    const schedulersData = await schedulersDataRes.json()\n    console.log(\"Home Page schedulers: \", Object.values(schedulersData))\n    setPublishedSchedulersData(Object.values(schedulersData))\n     const usersRes = await fetch('/getUsersInfo')\n    const usersData = await usersRes.json()\n    console.log(Object.values(usersData))\n    setUsers(Object.values(usersData))\n    */\n  }, []);\n  /*\n    const checkUserCoursesExists = async (uid) => {\n      var url = '/checkUserCourses/' + uid\n      const res = await fetch(url)\n      if(res.status === 200) //user database courses exists\n      {\n        console.log('User have courses.')\n        return true\n      }\n      if(res.status === 400)\n      {\n        return false\n      }\n    }\n  \n    const checkUserSchedulerDataExists = async (uid) => {\n      var url = '/checkUserScheduleData/' + uid\n      const res = await fetch(url)\n      if(res.status === 200) //user database exists\n      {\n        console.log('User have scheduler data.')\n        return true\n      }\n      else\n      {\n        return false\n      }\n    }\n  \n    const checkSharedSchedulersDataExists = async (uid) => {\n      var url = '/checkSharedScheduleData/' + uid\n      const res = await fetch(url)\n      if(res.status === 200) //user database exists\n      {\n        console.log('Shared scheduler data to user.')\n        return true\n      }\n      else\n      {\n        return false\n      }\n    }\n  \n    //fetch from user database courses\n    const fetchUserMandadtoryCourses = async (uid) => {\n      var url = '/mandatoryCourses/' + uid \n      const res = await fetch(url)\n      const data = await res.json()\n      console.log(\"user mandatory courses: \", data.mandatoryCourses)\n      setMandatoryCourses(data.mandatoryCourses)\n    }\n    const fetchUserElectiveCourses = async (uid) => {\n      var url = '/electiveCourses/' + uid \n      const res = await fetch(url)\n      const data = await res.json()\n      console.log(\"user elective courses: \", data.electiveCourses)\n      setElectiveCourses(data.electiveCourses)\n    }\n    const fetchSharedSchedulers = async (uid) => {\n      var url = '/sharedSchedulersData/' + uid \n      const schedulersDataRes = await fetch(url)\n      const schedulersData = await schedulersDataRes.json()\n      console.log(\"shared schedulers2: \", Object.values(schedulersData))\n      setSharedSchedulersData(Object.values(schedulersData))\n    }\n  \n    //fetch from newsletter database courses\n    const fetchMCourses = async () => {\n      const url = '/mandatoryCourses'\n      const res = await fetch(url)\n      const data = await res.json()\n      // init: adding needed fields to each object\n      const result = data.mandatoryCourses.map((v, index) => ({...v,\n          done: false,\n          id: index,\n  \t\t    courseType: 'Mandatory'\n      }));\n      console.log(\"Mandatory Courses: \", result)\n      setMandatoryCourses(result)\n      return result\n    }\n  \n    const fetchECourses = async () => {\n      var url = '/electiveCourses'\n      const res = await fetch(url)\n      const data = await res.json()\n      //adding needed fields to each object\n      const result = data.electiveCourses.map((v, index) => ({...v,\n          done: false,\n          id: index,\n  \t\t    courseType: 'Elective'\n      }));\n      console.log(\"Elective Courses: \", result)\n      setElectiveCourses(result)\n    }\n  \n    const updateUserDatabase = async () => {\n      const url = '/updateUserDatabase/' + user.uid\n      axios({\n        method: 'post',\n        url: url,\n        data: {\n          mandatoryCourses: {mandatoryCourses},\n          electiveCourses: {electiveCourses}\n        }\n      });\n    }\n    /*\n    const handleFileSubmit = async (formYear, formSemester) => {\n      //e.preventDefault()\n      year = formYear\n      semester = formSemester\n      var mandatoryCourses_ = await fetchMCourses()\n      await fetchECourses()\n      defaultCheckDoneCourses(mandatoryCourses_)\n      setShowKey('select')\n    }\n    */\n\n  const deleteModelFromDatabase = async (uid, modelIdToDelete) => {\n    const url = 'model/' + uid;\n\n    try {\n      const res = await axios({\n        method: 'delete',\n        url: url,\n        data: {\n          modelIdToDelete\n        }\n      });\n      console.log(res.data);\n    } catch (err) {\n      console.log(err.response.status);\n    }\n  };\n\n  const fetchModelsData = async uid => {\n    const url = 'models-data/' + uid;\n\n    try {\n      const res = await axios({\n        method: 'get',\n        url: url\n      });\n      console.log(res.data);\n      setModelsData(res.data['models_data']);\n    } catch (err) {\n      console.log(err.response.status);\n    }\n  };\n\n  const onLogin = async userFromLogin => {\n    setUser(userFromLogin);\n    setUserType(signedString);\n    setUid(userFromLogin.uid);\n    fetchModelsData(userFromLogin.uid);\n    /*\n    const userHaveCourses = await checkUserCoursesExists(uid)\n    const userHaveSchedulerData_ = await checkUserSchedulerDataExists(uid)\n    const userHaveSharedSchedulersData_ = await checkSharedSchedulersDataExists(uid)\n    if(userHaveSharedSchedulersData_)\n      await fetchSharedSchedulers(uid)\n    if(userHaveSchedulerData_ && userHaveCourses)\n    {\n      await fetchUserMandadtoryCourses(uid)\n      await fetchUserElectiveCourses(uid)\n    }\n    else if(userHaveCourses)\n    {\n      await fetchUserMandadtoryCourses(uid)\n      await fetchUserElectiveCourses(uid)\n    }\n    */\n  };\n\n  const onLogout = () => {\n    console.log(\"LOGOUT\");\n    setUser(null);\n  };\n\n  const onPredictFormSubmit = async predictedClass => {\n    console.log(predictedClass); //predictFeatures(dataToPredict)\n    //send to \n  };\n\n  const onPredictFileSubmit = predictedClass => {\n    console.log(predictedClass);\n  }; //TODO: extract scores and stats data\n\n\n  const onFileSubmit = async data => {\n    setModelId(data['file_id']);\n    setFeatures(data['features']);\n    setAccuracy(data['report']['accuracy']); //set confusion matrix and f1 scores\n\n    /*\n    for (let key in data)\n    {\n      console.log(typeof data[key])\n      if(typeof data[key] === Object)\n        for (let innerKey in data[key])\n          console.log(data[key][innerKey])\n      else\n        console.log(key + \": \" + data[key])\n    }\n    */\n  };\n\n  const handleSwitch = SwitchTextString => {\n    setClassifyingType(SwitchTextString);\n    if (themeColor === firstColor) setThemeColor(secondColor);else setThemeColor(firstColor);\n    console.log(SwitchTextString);\n  };\n\n  const deleteModelFromModelsData = modelIdToDelete => {\n    const newModelsData = modelsData.filter(modelData => modelData['id'] !== modelIdToDelete);\n    console.log(newModelsData);\n    setModelsData(newModelsData);\n  };\n\n  const onModelSelection = (modelId, features) => {\n    setFeatures(features);\n    setModelId(modelId); //TODO: goto step3 in stepper!\n\n    executeScroll();\n  };\n\n  const handleModelDelete = modelIdToDelete => {\n    deleteModelFromModelsData(modelIdToDelete);\n    deleteModelFromDatabase(uid, modelIdToDelete);\n  };\n\n  const startRef = useRef(null);\n\n  const executeScroll = () => scrollToRef(startRef);\n\n  const testButtonClick = async () => {\n    const url = 'models-data/1';\n    const res = await axios({\n      method: 'get',\n      url: url\n    });\n    console.log(res.data);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      fontFamily: 'Calibri'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Container, {\n      sx: {\n        width: \"90%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(AppBar, {\n        user: user,\n        handleLogin: onLogin,\n        handleLogout: onLogout,\n        handleStartClick: executeScroll\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: '10rem'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(About, {\n        user: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: testButtonClick,\n        children: \"Test\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this), modelsData ? /*#__PURE__*/_jsxDEV(ModelsCards, {\n        modelsData: modelsData,\n        onModelSelection: onModelSelection,\n        handleModelDelete: handleModelDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 11\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"waves\",\n      role: \"presentation\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-bottom\",\n      ref: startRef,\n      style: {\n        color: themeColor\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: '5rem'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AppStepper, {\n        firstStepComponent: /*#__PURE__*/_jsxDEV(HandleFile, {\n          uid: uid,\n          onFileSubmit: onFileSubmit,\n          handleSwitch: handleSwitch,\n          classifyingType: classifyingType,\n          themeColor: themeColor,\n          firstColor: firstColor,\n          secondColor: secondColor,\n          TextString: TextString,\n          FeaturesString: FeaturesString\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 15\n        }, this),\n        secondStepComponent: /*#__PURE__*/_jsxDEV(ScoresAndStats, {\n          accuracy: accuracy\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 15\n        }, this),\n        thirdStepComponent: /*#__PURE__*/_jsxDEV(HandleDataToPredict, {\n          uid: uid,\n          classifyingType: classifyingType,\n          features: features,\n          onPredictFormSubmit: onPredictFormSubmit,\n          onPredictFileSubmit: onPredictFileSubmit,\n          modelId: modelId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: '10rem'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 318,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"JEY4FcTa9CjYqqlcPUcIQ67/ras=\");\n\n_c = App;\nconst appStyle = {\n  backgroundColor: '#444',\n  color: 'white',\n  direction: 'rtl',\n  TextStringAlign: 'right'\n};\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["D:/CLSFY/src/App.js"],"names":["React","useState","useEffect","useRef","axios","AppBar","About","AppStepper","HandleFile","ModelsCards","ScoresAndStats","HandleDataToPredict","Container","v4","uuidv4","TextString","FeaturesString","firstColor","secondColor","anonymousString","signedString","scrollToRef","ref","current","scrollIntoView","behavior","block","App","themeColor","setThemeColor","classifyingType","setClassifyingType","accuracy","setAccuracy","user","setUser","userType","setUserType","uid","setUid","features","setFeatures","modelId","setModelId","modelsData","setModelsData","mandatoryCourses","setMandatoryCourses","electiveCourses","setElectiveCourses","userHaveSchedulerData","setUserHaveSchedulerData","publishedSchedulersData","setPublishedSchedulersData","sharedSchedulersData","setSharedSchedulersData","deleteModelFromDatabase","modelIdToDelete","url","res","method","data","console","log","err","response","status","fetchModelsData","onLogin","userFromLogin","onLogout","onPredictFormSubmit","predictedClass","onPredictFileSubmit","onFileSubmit","handleSwitch","SwitchTextString","deleteModelFromModelsData","newModelsData","filter","modelData","onModelSelection","executeScroll","handleModelDelete","startRef","testButtonClick","fontFamily","width","height","color","appStyle","backgroundColor","direction","TextStringAlign"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,MAA9B,QAA4C,OAA5C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAkB,qBAAlB;AACA,OAAOC,KAAP,MAAiB,oBAAjB;AACA,OAAOC,UAAP,MAAsB,yBAAtB;AAEA,OAAOC,UAAP,MAAsB,uCAAtB;AACA,OAAOC,WAAP,MAAuB,0BAAvB;AACA,OAAOC,cAAP,MAA0B,8CAA1B;AACA,OAAOC,mBAAP,MAA+B,yDAA/B;AAEA,OAAOC,SAAP,MAAsB,yBAAtB;AAEA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;;AAEA,MAAMC,UAAU,GAAG,MAAnB;AACA,MAAMC,cAAc,GAAG,UAAvB;AAEA,MAAMC,UAAU,GAAG,SAAnB;AACA,MAAMC,WAAW,GAAG,SAApB;AAEA,MAAMC,eAAe,GAAG,WAAxB;AACA,MAAMC,YAAY,GAAG,QAArB;;AAEA,MAAMC,WAAW,GAAIC,GAAD,IAASA,GAAG,CAACC,OAAJ,CAAYC,cAAZ,CAA2B;AAAEC,EAAAA,QAAQ,EAAE,QAAZ;AAAsBC,EAAAA,KAAK,EAAE;AAA7B,CAA3B,CAA7B;;AAEA,SAASC,GAAT,GACA;AAAA;;AACE,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8B5B,QAAQ,CAACgB,UAAD,CAA5C;AACA,QAAM,CAACa,eAAD,EAAkBC,kBAAlB,IAAwC9B,QAAQ,CAACc,UAAD,CAAtD;AACA,QAAM,CAACiB,QAAD,EAAWC,WAAX,IAA0BhC,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAM,CAACiC,IAAD,EAAOC,OAAP,IAAkBlC,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM,CAACmC,QAAD,EAAWC,WAAX,IAA0BpC,QAAQ,CAACkB,eAAD,CAAxC;AACA,QAAM,CAACmB,GAAD,EAAMC,MAAN,IAAgBtC,QAAQ,CAACa,MAAM,EAAP,CAA9B,CANF,CAM2C;;AACzC,QAAM,CAAC0B,QAAD,EAAWC,WAAX,IAA0BxC,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACyC,OAAD,EAAUC,UAAV,IAAwB1C,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAAC2C,UAAD,EAAaC,aAAb,IAA8B5C,QAAQ,CAAC,IAAD,CAA5C;AAEA,QAAM,CAAC6C,gBAAD,EAAmBC,mBAAnB,IAA0C9C,QAAQ,CAAC,IAAD,CAAxD;AACA,QAAM,CAAC+C,eAAD,EAAkBC,kBAAlB,IAAwChD,QAAQ,CAAC,IAAD,CAAtD;AACA,QAAM,CAACiD,qBAAD,EAAwBC,wBAAxB,IAAoDlD,QAAQ,CAAC,KAAD,CAAlE;AACA,QAAM,CAACmD,uBAAD,EAA0BC,0BAA1B,IAAwDpD,QAAQ,CAAC,EAAD,CAAtE;AACA,QAAM,CAACqD,oBAAD,EAAuBC,uBAAvB,IAAkDtD,QAAQ,CAAC,EAAD,CAAhE;AAGAC,EAAAA,SAAS,CAAC,YAAY;AACpB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEG,GAZQ,EAYN,EAZM,CAAT;AAaF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEE,QAAMsD,uBAAuB,GAAG,OAAOlB,GAAP,EAAYmB,eAAZ,KAAgC;AAC9D,UAAMC,GA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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport { useState, useEffect, useRef } from 'react'\nimport axios from 'axios';\nimport AppBar from'./components/AppBar'\nimport About from'./components/About'\nimport AppStepper from'./components/AppStepper'\n\nimport HandleFile from'./components/file_handling/HandleFile'\nimport ModelsCards from'./components/ModelsCards'\nimport ScoresAndStats from'./components/scores_and_stats/ScoresAndStats'\nimport HandleDataToPredict from'./components/handle_data_to_predict/HandleDataToPredict'\n\nimport Container from '@mui/material/Container';\n\nimport { v4 as uuidv4 } from 'uuid';\n\nconst TextString = \"Text\"\nconst FeaturesString = \"Features\"\n\nconst firstColor = \"#ffcc80\"\nconst secondColor = \"#80cbc4\"\n\nconst anonymousString = \"Anonymous\"\nconst signedString = \"Signed\"\n\nconst scrollToRef = (ref) => ref.current.scrollIntoView({ behavior: 'smooth', block: 'center' })\n\nfunction App()\n{\n  const [themeColor, setThemeColor] = useState(firstColor)  \n  const [classifyingType, setClassifyingType] = useState(TextString)\n  const [accuracy, setAccuracy] = useState(0)\n  const [user, setUser] = useState(null)\n  const [userType, setUserType] = useState(anonymousString)\n  const [uid, setUid] = useState(uuidv4()) //generate unique id for anonymous user\n  const [features, setFeatures] = useState({})\n  const [modelId, setModelId] = useState(null)\n  const [modelsData, setModelsData] = useState(null)\n\n  const [mandatoryCourses, setMandatoryCourses] = useState(null)\n  const [electiveCourses, setElectiveCourses] = useState(null)\n  const [userHaveSchedulerData, setUserHaveSchedulerData] = useState(false)\n  const [publishedSchedulersData, setPublishedSchedulersData] = useState([])\n  const [sharedSchedulersData, setSharedSchedulersData] = useState([])\n\n\n  useEffect(async () => {\n    /*\n    const schedulersDataRes = await fetch('/schedulersData')\n    const schedulersData = await schedulersDataRes.json()\n    console.log(\"Home Page schedulers: \", Object.values(schedulersData))\n    setPublishedSchedulersData(Object.values(schedulersData))\n\n    const usersRes = await fetch('/getUsersInfo')\n    const usersData = await usersRes.json()\n    console.log(Object.values(usersData))\n    setUsers(Object.values(usersData))\n    */\n  }, []);\n/*\n  const checkUserCoursesExists = async (uid) => {\n    var url = '/checkUserCourses/' + uid\n    const res = await fetch(url)\n    if(res.status === 200) //user database courses exists\n    {\n      console.log('User have courses.')\n      return true\n    }\n    if(res.status === 400)\n    {\n      return false\n    }\n  }\n\n  const checkUserSchedulerDataExists = async (uid) => {\n    var url = '/checkUserScheduleData/' + uid\n    const res = await fetch(url)\n    if(res.status === 200) //user database exists\n    {\n      console.log('User have scheduler data.')\n      return true\n    }\n    else\n    {\n      return false\n    }\n  }\n\n  const checkSharedSchedulersDataExists = async (uid) => {\n    var url = '/checkSharedScheduleData/' + uid\n    const res = await fetch(url)\n    if(res.status === 200) //user database exists\n    {\n      console.log('Shared scheduler data to user.')\n      return true\n    }\n    else\n    {\n      return false\n    }\n  }\n\n  //fetch from user database courses\n  const fetchUserMandadtoryCourses = async (uid) => {\n    var url = '/mandatoryCourses/' + uid \n    const res = await fetch(url)\n    const data = await res.json()\n    console.log(\"user mandatory courses: \", data.mandatoryCourses)\n    setMandatoryCourses(data.mandatoryCourses)\n  }\n  const fetchUserElectiveCourses = async (uid) => {\n    var url = '/electiveCourses/' + uid \n    const res = await fetch(url)\n    const data = await res.json()\n    console.log(\"user elective courses: \", data.electiveCourses)\n    setElectiveCourses(data.electiveCourses)\n  }\n  const fetchSharedSchedulers = async (uid) => {\n    var url = '/sharedSchedulersData/' + uid \n    const schedulersDataRes = await fetch(url)\n    const schedulersData = await schedulersDataRes.json()\n    console.log(\"shared schedulers2: \", Object.values(schedulersData))\n    setSharedSchedulersData(Object.values(schedulersData))\n  }\n\n  //fetch from newsletter database courses\n  const fetchMCourses = async () => {\n    const url = '/mandatoryCourses'\n    const res = await fetch(url)\n    const data = await res.json()\n    // init: adding needed fields to each object\n    const result = data.mandatoryCourses.map((v, index) => ({...v,\n        done: false,\n        id: index,\n\t\t    courseType: 'Mandatory'\n    }));\n    console.log(\"Mandatory Courses: \", result)\n    setMandatoryCourses(result)\n    return result\n  }\n\n  const fetchECourses = async () => {\n    var url = '/electiveCourses'\n    const res = await fetch(url)\n    const data = await res.json()\n    //adding needed fields to each object\n    const result = data.electiveCourses.map((v, index) => ({...v,\n        done: false,\n        id: index,\n\t\t    courseType: 'Elective'\n    }));\n    console.log(\"Elective Courses: \", result)\n    setElectiveCourses(result)\n  }\n\n  const updateUserDatabase = async () => {\n    const url = '/updateUserDatabase/' + user.uid\n    axios({\n      method: 'post',\n      url: url,\n      data: {\n        mandatoryCourses: {mandatoryCourses},\n        electiveCourses: {electiveCourses}\n      }\n    });\n  }\n  /*\n  const handleFileSubmit = async (formYear, formSemester) => {\n    //e.preventDefault()\n    year = formYear\n    semester = formSemester\n    var mandatoryCourses_ = await fetchMCourses()\n    await fetchECourses()\n    defaultCheckDoneCourses(mandatoryCourses_)\n    setShowKey('select')\n  }\n  */\n\n  const deleteModelFromDatabase = async (uid, modelIdToDelete) => {\n    const url = 'model/' + uid\n    try {\n        const res = await axios({\n            method: 'delete',\n            url: url,\n            data:{\n              modelIdToDelete\n            }\n        });\n        console.log(res.data)\n      } \n      catch (err) \n      {\n        console.log(err.response.status)\n      }\n}\n\n  const fetchModelsData = async (uid) => {\n    const url = 'models-data/' + uid\n    try {\n        const res = await axios({\n            method: 'get',\n            url: url\n        });\n        console.log(res.data)\n        setModelsData(res.data['models_data'])\n      } \n      catch (err) \n      {\n        console.log(err.response.status)\n      }\n}\n\n  const onLogin = async (userFromLogin) => {\n    setUser(userFromLogin)\n    setUserType(signedString)\n    setUid(userFromLogin.uid)\n    fetchModelsData(userFromLogin.uid)\n\n    \n\n    /*\n    const userHaveCourses = await checkUserCoursesExists(uid)\n    const userHaveSchedulerData_ = await checkUserSchedulerDataExists(uid)\n    const userHaveSharedSchedulersData_ = await checkSharedSchedulersDataExists(uid)\n    if(userHaveSharedSchedulersData_)\n      await fetchSharedSchedulers(uid)\n    if(userHaveSchedulerData_ && userHaveCourses)\n    {\n      await fetchUserMandadtoryCourses(uid)\n      await fetchUserElectiveCourses(uid)\n    }\n    else if(userHaveCourses)\n    {\n      await fetchUserMandadtoryCourses(uid)\n      await fetchUserElectiveCourses(uid)\n    }\n    */\n  }\n\n  const onLogout = () => {\n    console.log(\"LOGOUT\")\n    setUser(null)\n  }\n\n  const onPredictFormSubmit = async (predictedClass) => {\n    console.log(predictedClass)\n    //predictFeatures(dataToPredict)\n    //send to \n  }\n\n  const onPredictFileSubmit = (predictedClass) => {\n    console.log(predictedClass)\n  }\n\n  //TODO: extract scores and stats data\n  const onFileSubmit = async (data) => {\n    setModelId(data['file_id'])\n    setFeatures(data['features'])\n    setAccuracy(data['report']['accuracy'])\n\n    //set confusion matrix and f1 scores\n    /*\n    for (let key in data)\n    {\n      console.log(typeof data[key])\n      if(typeof data[key] === Object)\n        for (let innerKey in data[key])\n          console.log(data[key][innerKey])\n      else\n        console.log(key + \": \" + data[key])\n    }\n    */\n  }\n\n  const handleSwitch = (SwitchTextString) => {\n    setClassifyingType(SwitchTextString)\n    if(themeColor === firstColor)\n      setThemeColor(secondColor)\n    else\n      setThemeColor(firstColor)\n    console.log(SwitchTextString)\n  }\n\n  const deleteModelFromModelsData = (modelIdToDelete) => {\n    const newModelsData = modelsData.filter(modelData => modelData['id'] !== modelIdToDelete)\n    console.log(newModelsData)\n    setModelsData(newModelsData)\n  }\n\n  const onModelSelection = (modelId, features) => {\n    setFeatures(features)\n    setModelId(modelId)\n    //TODO: goto step3 in stepper!\n\n    executeScroll()\n  }\n\n  const handleModelDelete = (modelIdToDelete) => {\n    deleteModelFromModelsData(modelIdToDelete)\n    deleteModelFromDatabase(uid, modelIdToDelete)\n  }\n\n  const startRef = useRef(null)\n  const executeScroll = () => scrollToRef(startRef)\n\n  const testButtonClick = async () => {\n    const url = 'models-data/1'\n\n    const res = await axios({\n      method: 'get',\n      url: url\n    });\n    console.log(res.data)\n  }\n\n  return ( \n    <div style={{fontFamily: 'Calibri'}}>\n      <Container sx={{width: \"90%\"}}>\n        <AppBar\n          user={user} \n          handleLogin={onLogin} \n          handleLogout={onLogout}\n          handleStartClick={executeScroll}\n        />\n        <div style={{ height: '10rem' }} />\n        <About user={user}/>\n        <button onClick={testButtonClick}>Test</button>\n        <br/>\n        {modelsData? \n          <ModelsCards \n            modelsData={modelsData}\n            onModelSelection={onModelSelection}\n            handleModelDelete={handleModelDelete}\n          /> \n        : null}\n          <br/>\n\n      </Container>\n\n        <div className=\"waves\" role=\"presentation\"></div>\n        <div className=\"content-bottom\" ref={startRef} style={{color: themeColor}}>\n        <div style={{ height: '5rem' }} />\n\n          <AppStepper\n            firstStepComponent={\n              <HandleFile \n                uid={uid}\n                onFileSubmit={onFileSubmit}\n                handleSwitch={handleSwitch}\n                classifyingType={classifyingType}\n                themeColor={themeColor}\n                firstColor={firstColor}\n                secondColor={secondColor}\n                TextString={TextString}\n                FeaturesString={FeaturesString}\n              />}\n            secondStepComponent={\n              <ScoresAndStats \n                accuracy={accuracy}\n              />}\n            thirdStepComponent={\n              <HandleDataToPredict \n                uid={uid}\n                classifyingType={classifyingType}\n                features={features}\n                onPredictFormSubmit={onPredictFormSubmit}\n                onPredictFileSubmit={onPredictFileSubmit}\n                modelId={modelId}\n              />}\n          />\n          <div style={{ height: '10rem' }} />\n        </div>\n    </div>\n  );\n}\n\nconst appStyle = \n{\n  backgroundColor: '#444',\n  color: 'white',\n\tdirection: 'rtl',\n\tTextStringAlign: 'right',\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}